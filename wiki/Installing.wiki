#summary How to install the toolchain to the iPhone.

= Introduction =

Here are some simple instructions to install the toolchain to the iPhone.  The guide assumes that BSD subsystem is installed.  There is a bit of command-line work, so either SSH package or Terminal + iphuc must be installed.  These packages were built and tested on firmware 1.1.4, but they may work on older firmwares, too (YMMV).

= Details =

All the packages from this project will go in /usr/local on the iPhone, so make sure you have plenty of space.  I chose to put my /usr/local on the Media partition.  Here are the steps:
{{{
$ cd Media
$ mkdir local
$ login -pf root
Password:
# ln -s /var/mobile/Media/local /usr/local
# exit
}}}

Copy [http://iphone-gcc.googlecode.com/files/gcc-4.0.1-iphone-1.tgz gcc-4.0.1-iphone-1.tgz] to the iPhone to /var/mobile/Media/gcc-4.0.1-iphone-1.tgz and unpack it:
{{{
$ cd /
$ tar -xzf /var/mobile/Media/gcc-4.0.1-iphone-1.tgz
$ rm /var/mobile/Media/gcc-4.0.1-iphone-1.tgz
}}}

Copy [http://iphone-gcc.googlecode.com/files/odcctools-9.2-ld-iphone-1.tgz odcctools-9.2-ld-iphone-1.tgz] to the iPhone to /var/mobile/Media/odcctools-9.2-ld-iphone-1.tgz and unpack it:
{{{
$ cd /
$ tar -xzf /var/mobile/Media/odcctools-9.2-ld-iphone-1.tgz
$ rm /var/mobile/Media/odcctools-9.2-ld-iphone-1.tgz
}}}

Copy [http://iphone-gcc.googlecode.com/files/make-3.81-iphone-1.tgz make-3.81-iphone-1.tgz] to the iPhone to /var/mobile/Media/make-3.81-iphone-1.tgz and unpack it:
{{{
$ cd /
$ tar -xzf /var/mobile/Media/make-3.81-iphone-1.tgz
$ rm /var/mobile/Media/make-3.81-iphone-1.tgz
}}}

Copy headers-4.0.0-iphone-1.tgz to the iPhone to /var/mobile/Media/headers-4.0.0-iphone-1.tgz and unpack it:
{{{
$ cd /
$ tar -xzf /var/mobile/Media/headers-4.0.0-iphone-1.tgz
$ rm /var/mobile/Media/headers-4.0.0-iphone-1.tgz
}}}

Okay, so you don't have headers-4.0.0-iphone-1.tgz; you have to built this package yourself.  The following steps must be done on your computer:
{{{
$ svn co http://iphone-dev.googlecode.com/svn/branches/include-1.2-sdk
$ wget http://iphone-gcc.googlecode.com/files/headers.patch.gz
$ THISPATH=`pwd`
$ INSTPATH=$THISPATH/usr/local
$ MACOSXDK=path_to/MacOSX10.4u.sdk
$ pushd include-1.2-sdk
$ ./configure --with-macosx-sdk=$MACOSXDK --prefix=$INSTPATH
$ bash install-headers.sh
$ cd $INSTPATH/include && zcat $THISPATH/headers.patch.gz | patch -p1
$ cd $INSTPATH/include/c++ && ln -s 4.0.0 4.0.1
$ popd
$ tar -czf headers-4.0.0-iphone-1.tgz usr
}}}